PREFIX my: <http://my/>
PREFIX res: {{ resource }}

CONSTRUCT {
    res: a ?type .
    res: my:subject ?out .
    res: my:object ?in
}

WHERE {
    OPTIONAL { res: a ?type }
    OPTIONAL { res: ?out [] . FILTER(?out NOT IN (rdf:type)) }
    OPTIONAL { [] ?in res: }
}